<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DormAlign | Smart Roommate Matching</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }

        .navbar {
            border-bottom: 1px solid #eee;
            animation: slideDown 0.5s ease forwards;
        }
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to   { transform: translateY(0);     opacity: 1; }
        }
        .navbar-brand { transition: letter-spacing 0.3s ease; }
        .navbar-brand:hover { letter-spacing: 2px; }

        .nav-link {
            position: relative;
            transition: color 0.2s;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            left: 0; bottom: 0;
            width: 0; height: 2px;
            background: #0d6efd;
            transition: width 0.25s ease;
        }
        .nav-link:hover::after { width: 100%; }

        .hero-section {
            padding: 100px 0;
            background: white;
            border-bottom: 1px solid #e9ecef;
            margin-bottom: 50px;
            overflow: hidden;
        }
        .hero-title-box {
            animation: fadeScaleIn 0.7s cubic-bezier(.22,1,.36,1) 0.2s both;
        }
        .hero-subtitle-box {
            animation: fadeScaleIn 0.7s cubic-bezier(.22,1,.36,1) 0.45s both;
        }
        @keyframes fadeScaleIn {
            from { opacity: 0; transform: scale(0.92) translateY(20px); }
            to   { opacity: 1; transform: scale(1)    translateY(0);    }
        }

        .action-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 12px;
            padding: 28px;
            height: 100%;
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s;
            opacity: 0;
            transform: translateY(20px);
        }
        .action-card.visible {
            animation: fadeUp 0.5s ease forwards;
        }
        .action-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.09);
            border-color: #0d6efd;
        }
        @keyframes fadeUp {
            to { opacity: 1; transform: translateY(0); }
        }

        .action-card-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            margin-bottom: 14px;
            transition: transform 0.2s;
        }
        .action-card:hover .action-card-icon {
            transform: scale(1.12) rotate(-5deg);
        }

        .action-card h5 {
            font-weight: 800;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-bottom: 6px;
        }
        .action-card p {
            font-size: 0.84rem;
            color: #888;
            margin-bottom: 18px;
        }

        .role-banner {
            animation: fadeUp 0.5s ease 0.15s both;
            border-radius: 12px;
            padding: 14px 20px;
            font-size: 0.82rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 28px;
        }

        .problem-statement-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 12px;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
            animation: fadeUp 0.6s ease 0.3s both;
        }

        .problem-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid #edf2f7;
            border-radius: 8px;
            opacity: 0;
            transform: translateX(-20px);
            transition: transform 0.2s, border-color 0.2s, background 0.2s;
        }
        .problem-item.visible {
            animation: slideRight 0.45s ease forwards;
        }
        .problem-item:nth-child(1) { animation-delay: 0.05s; }
        .problem-item:nth-child(2) { animation-delay: 0.15s; }
        .problem-item:nth-child(3) { animation-delay: 0.25s; }
        .problem-item:nth-child(4) { animation-delay: 0.35s; }
        @keyframes slideRight {
            to { opacity: 1; transform: translateX(0); }
        }
        .problem-item:hover {
            transform: translateX(10px);
            border-color: #0d6efd;
            background: #f0f6ff;
        }

        .dot {
            height: 10px;
            width: 10px;
            min-width: 10px;
            background-color: #0d6efd;
            border-radius: 50%;
            display: inline-block;
            margin-right: 15px;
            transition: transform 0.2s;
        }
        .problem-item:hover .dot { transform: scale(1.6); }

        .how-it-works-card {
            border: 1px solid #edf2f7;
            border-radius: 12px;
            background: white;
            opacity: 0;
            transform: translateY(30px);
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s;
        }
        .how-it-works-card.visible {
            animation: fadeUp2 0.55s ease forwards;
        }
        .col-md-3:nth-child(1) .how-it-works-card { animation-delay: 0s;   }
        .col-md-3:nth-child(2) .how-it-works-card { animation-delay: 0.1s; }
        .col-md-3:nth-child(3) .how-it-works-card { animation-delay: 0.2s; }
        .col-md-3:nth-child(4) .how-it-works-card { animation-delay: 0.3s; }
        @keyframes fadeUp2 {
            from { opacity: 0; transform: translateY(30px); }
            to   { opacity: 1; transform: translateY(0);    }
        }
        .how-it-works-card:hover {
            transform: translateY(-6px) !important;
            box-shadow: 0 10px 28px rgba(13,110,253,0.12);
            border-color: #0d6efd;
        }

        .step-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #0d6efd;
            line-height: 1;
            transition: transform 0.3s ease;
        }
        .how-it-works-card:hover .step-number { transform: scale(1.2) rotate(-5deg); }

        section h2 {
            opacity: 0;
            transform: translateY(20px);
        }
        section h2.visible { animation: fadeUp 0.5s ease forwards; }
        section hr.visible {
            animation: growWidth 0.6s ease 0.15s forwards;
            width: 0 !important;
            opacity: 0;
        }
        @keyframes growWidth { to { width: 25% !important; opacity: 1; } }

        .btn-outline-dark {
            position: relative;
            overflow: hidden;
            transition: color 0.3s;
        }
        .btn-outline-dark::before {
            content: '';
            position: absolute;
            inset: 0;
            background: #212529;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
            z-index: 0;
        }
        .btn-outline-dark:hover::before { transform: scaleX(1); }
        .btn-outline-dark:hover { color: white !important; }
        .btn-outline-dark span { position: relative; z-index: 1; }

        .btn-primary {
            animation: subtlePulse 2.5s ease-in-out infinite;
        }
        @keyframes subtlePulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(13,110,253,0.35); }
            50%       { box-shadow: 0 0 0 8px rgba(13,110,253,0);   }
        }

        .btn-success {
            animation: subtlePulseGreen 2.5s ease-in-out 1s infinite;
        }
        @keyframes subtlePulseGreen {
            0%, 100% { box-shadow: 0 0 0 0 rgba(25,135,84,0.35); }
            50%       { box-shadow: 0 0 0 8px rgba(25,135,84,0);   }
        }

        footer { animation: fadeUp 0.5s ease 0.2s both; }

        .btn-custom {
            border-radius: 8px;
            padding: 10px 25px;
            font-weight: 600;
        }

        .section-heading-wrap {
            opacity: 0;
            transform: translateY(20px);
        }
        .section-heading-wrap.visible {
            animation: fadeUp 0.5s ease forwards;
        }

        :root {
            --bg: #edf3ff;
            --panel: #ffffff;
            --line: #c8d9ff;
            --ink: #112245;
            --blue: #1d4ed8;
            --cyan: #0891b2;
        }

        body {
            color: var(--ink);
            background:
                radial-gradient(900px 500px at 100% -20%, #d9f0ff 0%, rgba(217,240,255,0) 60%),
                radial-gradient(800px 450px at -10% 120%, #c7d9ff 0%, rgba(199,217,255,0) 60%),
                var(--bg);
        }

        .hero-section {
            background: transparent;
            border-bottom: none;
            padding-top: 70px;
        }

        .hero-title-box {
            border: none !important;
            border-radius: 22px;
            padding: 38px 34px !important;
            color: #fff;
            background: linear-gradient(115deg, #1d4ed8, #0ea5e9);
            box-shadow: 0 20px 40px rgba(20, 40, 120, 0.2);
        }

        .hero-title-box h1 {
            font-size: clamp(1.75rem, 4vw, 3.25rem);
        }

        .hero-subtitle-box {
            border: 1px solid var(--line) !important;
            border-radius: 14px;
            background: #f8fbff;
        }

        .hero-subtitle-box p {
            color: #385284 !important;
            font-weight: 600;
        }

        .action-card,
        .problem-statement-card,
        .how-it-works-card {
            border-color: var(--line);
            box-shadow: 0 12px 24px rgba(26, 52, 128, 0.09);
        }

        .problem-item {
            border-color: var(--line);
            background: #f8fbff;
        }

        .problem-item:hover {
            background: #eef5ff;
            border-color: #9ec3ff;
        }

        .dot,
        .step-number {
            color: var(--blue);
            background-color: var(--blue);
        }

        .btn-primary {
            border-color: transparent;
            background: linear-gradient(115deg, #1d4ed8, #0891b2);
        }

        .btn-outline-dark {
            color: #1d4ed8;
            border-color: #9ec3ff;
            background: #f5f9ff;
        }

        .btn-outline-dark::before {
            background: linear-gradient(115deg, #1d4ed8, #0891b2);
        }

        footer {
            background: transparent !important;
            border-top: none !important;
        }

        footer .border {
            border-color: var(--line) !important;
            border-radius: 12px;
            background: #f8fbff;
            color: #36527f;
        }

        .popup-toast {
            position: fixed;
            top: 78px;
            right: 18px;
            z-index: 1080;
            min-width: 290px;
            max-width: 360px;
            border-radius: 12px;
            border: 1px solid #b9e8cb;
            background: #effcf4;
            color: #0c7f47;
            box-shadow: 0 14px 28px rgba(12, 127, 71, 0.2);
            padding: 12px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            animation: fadeUp 0.3s ease forwards;
        }

        .popup-toast .msg {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 0.86rem;
        }

        .popup-toast button {
            border: 0;
            background: transparent;
            color: #0c7f47;
            font-weight: 800;
            font-size: 0.95rem;
            line-height: 1;
        }
    </style>
</head>
<body>

    {% if user_type == 'admin' and algo_msg == 'scores_calculated' %}
    <div id="algo-toast" class="popup-toast" role="status" aria-live="polite">
        <div class="msg">
            <i class="fa-solid fa-circle-check"></i>
            <span>Compatibility scores calculated successfully.</span>
        </div>
        <button type="button" onclick="document.getElementById('algo-toast').remove()" aria-label="Close">&times;</button>
    </div>
    {% endif %}

    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="/">DORM<span class="text-dark">ALIGN</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    {% if not user_type %}
                        <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
                        <li class="nav-item"><a class="btn btn-primary btn-custom ms-lg-3" href="/register">Sign Up</a></li>
                    {% elif user_type == 'admin' %}
                        <li class="nav-item"><a class="nav-link" href="/admin/dashboard">Admin Dashboard</a></li>
                        <li class="nav-item"><a class="nav-link" href="/admin/profile">Admin Profile</a></li>

                        <li class="nav-item"><a class="nav-link" href="/admin/view/compatibility">Scores</a></li>
                        <li class="nav-item"><a class="btn btn-outline-danger btn-sm ms-lg-3 mt-1" href="/logout">Logout</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="/dashboard">Dashboard</a></li>
                        <li class="nav-item"><a class="btn btn-outline-danger btn-sm ms-lg-3 mt-1" href="/logout">Logout</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <header class="hero-section text-center">
        <div class="container">
            <div class="hero-title-box py-5 px-4 border border-dark border-2 d-inline-block">
                <h1 class="display-4 m-0" style="font-weight:800;letter-spacing:-1px;text-transform:uppercase;">HOSTEL ROOMMATE COMPATIBILITY SYSTEM</h1>
            </div>
            <div class="hero-subtitle-box mt-4 py-2 border border-secondary border-1 d-inline-block px-5">
                <p class="lead mb-0 text-muted">Data-driven roommate matching for hostels</p>
            </div>
        </div>
    </header>

    <main class="container mb-5">

        {% if not user_type %}
        <div class="text-center mb-5">
            <div class="role-banner bg-light border">
                <i class="fa-solid fa-circle-info text-muted"></i>
                <span class="text-muted">Please log in or register to continue</span>
            </div>
            <div class="row g-4 justify-content-center">
                <div class="col-md-4">
                    <div class="action-card text-center">
                        <div class="action-card-icon mx-auto" style="background:#e8f0fe; color:#0d6efd;">
                            <i class="fa-solid fa-right-to-bracket"></i>
                        </div>
                        <h5>Login</h5>
                        <p>Already have an account? Sign in to access your dashboard.</p>
                        <a href="/login" class="btn btn-primary btn-custom w-100">Login</a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="action-card text-center">
                        <div class="action-card-icon mx-auto" style="background:#e6f4ea; color:#198754;">
                            <i class="fa-solid fa-user-plus"></i>
                        </div>
                        <h5>Register</h5>
                        <p>New here? Create an account and find your perfect roommate.</p>
                        <a href="/register" class="btn btn-outline-dark btn-custom w-100"><span>Sign Up</span></a>
                    </div>
                </div>
            </div>
        </div>

        {% elif user_type == 'admin' %}
        <div class="mb-5">
            <div class="role-banner" style="background:#fff3cd; border:1px solid #ffc107; color:#856404;">
                <i class="fa-solid fa-shield-halved"></i>
                <span>Admin Panel — Manage students and compatibility scores</span>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#e8f0fe; color:#0d6efd;">
                            <i class="fa-solid fa-heart-pulse"></i>
                        </div>
                        <h5>Compatibility Scores</h5>
                        <p>View all computed compatibility pairings between students.</p>
                        <a href="/admin/view/compatibility" class="btn btn-outline-dark btn-custom w-100"><span>View Scores</span></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#e6f4ea; color:#198754;">
                            <i class="fa-solid fa-calculator"></i>
                        </div>
                        <h5>Calculate Scores</h5>
                        <p>Run the compatibility algorithm across all student profiles.</p>
                        <a href="/admin/calculate_compatibility" class="btn btn-outline-dark btn-custom w-100"><span>Run Algorithm</span></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#f3e8ff; color:#8b5cf6;">
                            <i class="fa-solid fa-users"></i>
                        </div>
                        <h5>Student Submissions</h5>
                        <p>Browse all student entries and their submitted preferences.</p>
                        <a href="/submissions" class="btn btn-outline-dark btn-custom w-100"><span>View Submissions</span></a>
                    </div>
                </div>
            </div>
        </div>

        {% else %}
        <div class="mb-5">
            <div class="role-banner" style="background:#e8f0fe; border:1px solid #b6d0f7; color:#0d47a1;">
                <i class="fa-solid fa-graduation-cap"></i>
                <span>Student Portal — Find your compatible roommate</span>
            </div>
            <div class="row g-4 justify-content-center">
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#e8f0fe; color:#0d6efd;">
                            <i class="fa-solid fa-gauge"></i>
                        </div>
                        <h5>Dashboard</h5>
                        <p>View your profile, preferences, and matched roommate details.</p>
                        <a href="/dashboard" class="btn btn-outline-dark btn-custom w-100"><span>Go to Dashboard</span></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#e6f4ea; color:#198754;">
                            <i class="fa-solid fa-sliders"></i>
                        </div>
                        <h5>Submit Preferences</h5>
                        <p>Fill out your lifestyle habits so we can find your best match.</p>
                        <a href="/roommate" class="btn btn-outline-dark btn-custom w-100"><span>Start Matching</span></a>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="action-card">
                        <div class="action-card-icon" style="background:#f3e8ff; color:#8b5cf6;">
                            <i class="fa-solid fa-table-list"></i>
                        </div>
                        <h5>View Submissions</h5>
                        <p>Browse other student entries and current pairings.</p>
                        <a href="/submissions" class="btn btn-outline-dark btn-custom w-100"><span>View Gallery</span></a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="problem-statement-card shadow-sm">
            <h4 class="fw-bold mb-4">PROBLEM STATEMENT</h4>
            <hr class="mb-4">
            <div class="problem-item">
                <span class="dot"></span>
                <span>Sleep schedule conflicts</span>
            </div>
            <div class="problem-item">
                <span class="dot"></span>
                <span>Cleanliness issues</span>
            </div>
            <div class="problem-item">
                <span class="dot"></span>
                <span>Different study habits</span>
            </div>
            <div class="problem-item">
                <span class="dot"></span>
                <span>Noise tolerance differences</span>
            </div>
        </div>
    </main>

    <section class="mt-5 pt-4 container">
        <div class="text-center mb-5 section-heading-wrap">
            <h2 class="fw-bold">HOW IT WORKS</h2>
            <hr class="w-25 mx-auto border-2 border-primary">
        </div>

        <div class="row g-4 text-center">
            <div class="col-md-3">
                <div class="how-it-works-card p-4 h-100">
                    <div class="step-number mb-3">1</div>
                    <h6 class="fw-bold border-bottom pb-2 mb-3">CREATE PROFILE</h6>
                    <p class="small text-muted">Student registration and profile setup</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="how-it-works-card p-4 h-100">
                    <div class="step-number mb-3">2</div>
                    <h6 class="fw-bold border-bottom pb-2 mb-3">SET LIFESTYLE PREFERENCES</h6>
                    <p class="small text-muted">Define living habits and preferences</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="how-it-works-card p-4 h-100">
                    <div class="step-number mb-3">3</div>
                    <h6 class="fw-bold border-bottom pb-2 mb-3">COMPATIBILITY MATCHING</h6>
                    <p class="small text-muted">Algorithm matches compatible students</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="how-it-works-card p-4 h-100">
                    <div class="step-number mb-3">4</div>
                    <h6 class="fw-bold border-bottom pb-2 mb-3">ROOM ASSIGNMENT</h6>
                    <p class="small text-muted">Receive room and roommate details</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="mt-5 py-4 bg-light border-top">
        <div class="container text-center">
            <div class="py-2 border border-secondary border-1 d-inline-block px-5">
                <p class="mb-0 small fw-bold">DBMS PROJECT – HOSTEL ROOMMATE COMPATIBILITY SYSTEM</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.problem-item').forEach(el => observer.observe(el));
        document.querySelectorAll('.how-it-works-card').forEach(el => observer.observe(el));
        document.querySelectorAll('.section-heading-wrap').forEach(el => observer.observe(el));
        document.querySelectorAll('.action-card').forEach((el, i) => {
            el.style.animationDelay = (i * 0.1) + 's';
            observer.observe(el);
        });

        const algoToast = document.getElementById('algo-toast');
        if (algoToast) {
            setTimeout(() => {
                if (algoToast && algoToast.parentNode) {
                    algoToast.remove();
                }
            }, 3500);
        }
    </script>
</body>
</html>
